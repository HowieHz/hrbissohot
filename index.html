<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">ÂìàÂ∞îÊª®Â§™‚Ñ¢ÁÉ≠‰∫Ü</title>
    <script defer src="https://umami.howiehz.top/script.js" data-website-id="ecf51c4e-d7d8-4f6d-a4cd-89ce7112ab02" data-domains="hrbissohot.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
        }
        
        h1 {
            text-align: center;
            color: #d73a49;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        
        .intro {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 30px;
            border-left: 4px solid #0366d6;
        }
        
        .ac-summary {
            background-color: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .ac-summary h3 {
            margin: 0 0 15px 0;
            color: #0366d6;
            font-size: 1.2em;
        }
        
        .ac-list {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .ac-category {
            flex: 1;
            min-width: 200px;
        }
        
        .ac-category h4 {
            margin: 0 0 8px 0;
            font-size: 1em;
            color: #333;
        }
        
        .ac-category.full h4 {
            color: #28a745;
        }
        
        .ac-category.basic h4 {
            color: #17a2b8;
        }
        
        .ac-category.classroom h4 {
            color: #fd7e14;
        }
        
        .ac-category.dormitory h4 {
            color: #0066cc;
        }
        
        .ac-category.canteen h4 {
            color: #e83e8c;
        }
        
        .ac-category.library h4 {
            color: #6f42c1;
        }
        
        .ac-category.none h4 {
            color: #dc3545;
        }
        
        .ac-category.pending h4 {
            color: #6c757d;
        }
        
        .ac-schools {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .ac-schools li {
            padding: 4px 0;
            font-size: 0.9em;
            color: #666;
            border-bottom: 1px solid #eee;
        }
        
        .ac-schools li:last-child {
            border-bottom: none;
        }
        
        .contribute {
            margin-bottom: 30px;
        }
        
        .contribute-section {
            background-color: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .contribute-section h3 {
            margin: 0 0 20px 0;
            color: #28a745;
            font-size: 1.2em;
            text-align: center;
        }
        
        .contribute-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .contribute-option {
            background-color: white;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 20px;
            text-align: center;
            transition: box-shadow 0.2s;
        }
        
        .contribute-option:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .contribute-option .icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }
        
        .contribute-option h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.1em;
        }
        
        .contribute-option p {
            margin: 0 0 15px 0;
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }
        
        .contribute-option .update-delay {
            font-size: 0.8em;
            color: #888;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .contribute-btn {
            display: inline-block;
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        
        .contribute-btn:hover {
            background-color: #218838;
            color: white;
        }
        
        .contribute-btn.secondary {
            background-color: #17a2b8;
        }
        
        .contribute-btn.secondary:hover {
            background-color: #138496;
        }
        
        /* ÁßªÂä®ËÆæÂ§áÈÄÇÈÖç */
        @media (max-width: 768px) {
            .contribute-options {
                grid-template-columns: 1fr;
            }
            
            .ac-list {
                flex-direction: column;
            }
            
            .ac-category {
                min-width: unset;
            }
        }
        
        .category-title {
            font-size: 1.5em;
            color: #0366d6;
            margin: 30px 0 15px 0;
            border-bottom: 2px solid #e1e4e8;
            padding-bottom: 10px;
        }
        
        .school {
            background-color: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            margin-bottom: 15px;
            padding: 15px;
        }
        
        .school h3 {
            margin: 0 0 10px 0;
            color: #0366d6;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .status-supported {
            background-color: #28a745;
            color: white;
        }
        
        .status-partial {
            background-color: #ffc107;
            color: #212529;
        }
        
        .status-unsupported {
            background-color: #dc3545;
            color: white;
        }

        .status-pending {
            background-color: #e1e4e8;
            color: #6c757d;
        }
        
        .school-info {
            font-size: 0.9em;
            color: #666;
        }
        
        .school-info p {
            margin: 5px 0;
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #666;
            font-size: 0.9em;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="loading" class="loading">Ê≠£Âú®Âä†ËΩΩÊï∞ÊçÆ...</div>
    <div id="error" class="error" style="display: none;"></div>
    <div id="content" style="display: none;">
        <h1 id="main-title"></h1>
        <div id="subtitle" class="subtitle"></div>
        
        <div id="intro" class="intro"></div>
        
        <div id="ac-summary" class="ac-summary"></div>
        
        <div id="contribute" class="contribute-section"></div>
        
        <div id="schools-container"></div>
        
        <div id="footer" class="footer"></div>
    </div>

    <script>
        // ‰ªé JSON Êñá‰ª∂Âä†ËΩΩÊï∞ÊçÆ
        async function loadData() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error loading data:', error);
                throw error;
            }
        }

        // Ê∏≤ÊüìÈ°µÈù¢ÂÜÖÂÆπ
        function renderPage(data) {
            // ËÆæÁΩÆÈ°µÈù¢Ê†áÈ¢ò
            document.getElementById('page-title').textContent = data.title.replace('üå°Ô∏è ', '');
            document.getElementById('main-title').textContent = data.title;
            document.getElementById('subtitle').textContent = data.subtitle;

            // ËÆæÁΩÆ‰ªãÁªçÈÉ®ÂàÜ
            const introElement = document.getElementById('intro');
            const homepageLink = data.project_info && data.project_info.repository 
                ? `<p style="text-align: center; margin-top: 15px;"><a href="${data.project_info.repository}" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: bold;">üè† È°πÁõÆÈ¶ñÈ°µ</a></p>`
                : '';
            
            introElement.innerHTML = `
                <p><strong>${data.intro.description}</strong></p>
                <p>${data.intro.details}</p>
                ${homepageLink}
            `;

            // ÁßªÈô§È°πÁõÆ‰ø°ÊÅØÈÉ®ÂàÜÔºàÂ∑≤ÁÆÄÂåñÂà∞‰ªãÁªç‰∏≠Ôºâ

            // ÁîüÊàêÁ©∫Ë∞ÉË¶ÜÁõñÊÉÖÂÜµÊ±áÊÄª
            const acSummaryElement = document.getElementById('ac-summary');
            const acCoverage = {
                full: [],      // ÂÆåÂÖ®Ë¶ÜÁõñÔºà4‰∏™Âú∫ÊâÄÈÉΩÊúâÔºâ
                basic: [],     // Âü∫Êú¨Ë¶ÜÁõñÔºà2-3‰∏™Âú∫ÊâÄÔºâ
                classroom: [], // ÊïôÂÆ§Ë¶ÜÁõñ
                dormitory: [], // ÂÆøËàçË¶ÜÁõñ
                canteen: [],   // È£üÂ†ÇË¶ÜÁõñ
                library: [],   // Âõæ‰π¶È¶ÜË¶ÜÁõñ
                none: [],
                pending: []
            };

            // Êî∂ÈõÜÊâÄÊúâÂ≠¶Ê†°ÁöÑÁ©∫Ë∞ÉË¶ÜÁõñÊÉÖÂÜµ
            data.categories.forEach(category => {
                category.schools.forEach(school => {
                    // Â¶ÇÊûúÊòØ‰ø°ÊÅØÂæÖË°•ÂÖÖÁöÑÂ≠¶Ê†°ÔºåÂçïÁã¨ÂàÜÁ±ª
                    if (school.status === 'pending') {
                        acCoverage.pending.push(school.name);
                        return;
                    }
                    
                    if (school.airConditioningCoverage && Array.isArray(school.airConditioningCoverage)) {
                        const coverageTypes = school.airConditioningCoverage;
                        
                        // Â¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïË¶ÜÁõñÔºåÂàôÂΩíÁ±ª‰∏∫ÂÆåÂÖ®Ê≤°ÊúâË¶ÜÁõñ
                        if (coverageTypes.length === 0) {
                            acCoverage.none.push(school.name);
                            return;
                        }
                        
                        // ÁªüËÆ°ÂÖ∑‰ΩìÂú∫ÊâÄË¶ÜÁõñÊÉÖÂÜµ
                        let coverageCount = 0;
                        coverageTypes.forEach(coverage => {
                            switch (coverage) {
                                case 'classroom':
                                    acCoverage.classroom.push(school.name);
                                    coverageCount++;
                                    break;
                                case 'dormitory':
                                    acCoverage.dormitory.push(school.name);
                                    coverageCount++;
                                    break;
                                case 'canteen':
                                    acCoverage.canteen.push(school.name);
                                    coverageCount++;
                                    break;
                                case 'library':
                                    acCoverage.library.push(school.name);
                                    coverageCount++;
                                    break;
                            }
                        });
                        
                        // Ê†πÊçÆË¶ÜÁõñÂú∫ÊâÄÊï∞ÈáèËá™Âä®Âà§Êñ≠Á≠âÁ∫ß
                        if (coverageCount >= 4) {
                            acCoverage.full.push(school.name);
                        } else if (coverageCount >= 2) {
                            acCoverage.basic.push(school.name);
                        }
                    }
                });
            });

            // Ê∏≤ÊüìÁ©∫Ë∞ÉË¶ÜÁõñÊÉÖÂÜµÊ±áÊÄª
            acSummaryElement.innerHTML = `
                <h3>üå°Ô∏è Á©∫Ë∞ÉË¶ÜÁõñÊÉÖÂÜµÊ¶ÇËßà</h3>
                <div class="ac-list">
                    <div class="ac-category full">
                        <h4>‚úÖ ÂÆåÂÖ®Ë¶ÜÁõñ (${acCoverage.full.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.full.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.full.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                        <small style="color: #666; font-size: 0.8em;">ÊïôÂÆ§„ÄÅÂÆøËàç„ÄÅÈ£üÂ†Ç„ÄÅÂõæ‰π¶È¶ÜÂõõ‰∏™Âú∫ÊâÄÈÉΩÊúâÁ©∫Ë∞É</small>
                    </div>
                    <div class="ac-category basic">
                        <h4>üÜó Âü∫Êú¨Ë¶ÜÁõñ (${acCoverage.basic.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.basic.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.basic.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                        <small style="color: #666; font-size: 0.8em;">Ëá≥Â∞ë‰∏§‰∏™‰∏ªË¶ÅÂú∫ÊâÄÊúâÁ©∫Ë∞ÉË¶ÜÁõñ</small>
                    </div>
                    <div class="ac-category classroom">
                        <h4>üè´ ÊïôÂÆ§ÊúâË¶ÜÁõñ (${acCoverage.classroom.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.classroom.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.classroom.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                    <div class="ac-category dormitory">
                        <h4>üè† ÂÆøËàçÊúâË¶ÜÁõñ (${acCoverage.dormitory.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.dormitory.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.dormitory.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                    <div class="ac-category canteen">
                        <h4>üçΩÔ∏è È£üÂ†ÇÊúâË¶ÜÁõñ (${acCoverage.canteen.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.canteen.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.canteen.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                    <div class="ac-category library">
                        <h4>üìö Âõæ‰π¶È¶Ü/Ëá™‰π†ÂÆ§ÊúâË¶ÜÁõñ (${acCoverage.library.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.library.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.library.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                    <div class="ac-category none">
                        <h4>‚ùå ÂÆåÂÖ®Ê≤°ÊúâË¶ÜÁõñ (${acCoverage.none.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.none.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.none.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                    <div class="ac-category pending">
                        <h4>‚ùì ‰ø°ÊÅØÂæÖË°•ÂÖÖ (${acCoverage.pending.length}ÊâÄ)</h4>
                        <ul class="ac-schools">
                            ${acCoverage.pending.map(school => `<li>${school}</li>`).join('')}
                            ${acCoverage.pending.length === 0 ? '<li>ÊöÇÊó†Êï∞ÊçÆ</li>' : ''}
                        </ul>
                    </div>
                </div>
            `;

            // ËÆæÁΩÆË¥°ÁåÆÈÉ®ÂàÜ
            const contributeElement = document.getElementById('contribute');
            if (data.contribute_links && data.contribute_links.length > 0) {
                const contributeOptionsHtml = data.contribute_links.map(link => `
                    <div class="contribute-option">
                        <span class="icon">${link.icon}</span>
                        <h4>${link.title}</h4>
                        <p>${link.description}</p>
                        <div class="update-delay">‚è±Ô∏è ${link.update_delay}</div>
                        <a href="${link.url}" class="contribute-btn ${link.type === 'github_issue' ? '' : 'secondary'}" target="_blank">
                            ${link.type === 'github_issue' ? 'Êèê‰∫§ Issue' : 'Â°´ÂÜôÈóÆÂç∑'}
                        </a>
                    </div>
                `).join('');
                
                contributeElement.innerHTML = `
                    <h3>ü§ù Ë¥°ÁåÆ‰ø°ÊÅØ</h3>
                    <div class="contribute-options">
                        ${contributeOptionsHtml}
                    </div>
                `;
            }

            // Ê∏≤ÊüìÂ≠¶Ê†°‰ø°ÊÅØ
            const schoolsContainer = document.getElementById('schools-container');
            let schoolsHtml = '';

            data.categories.forEach(category => {
                schoolsHtml += `<h2 class="category-title">${category.name}</h2>`;
                
                category.schools.forEach(school => {
                    const statusClass = `status-${school.status}`;
                    
                    schoolsHtml += `
                        <div class="school">
                            <h3>${school.name}</h3>
                            <div class="status ${statusClass}">Áä∂ÊÄÅÔºö${school.statusText}</div>
                            <div class="school-info">
                                <p>${school.description}</p>
                                ${school.details.map(detail => `<p>${detail}</p>`).join('')}
                            </div>
                        </div>
                    `;
                });
            });

            schoolsContainer.innerHTML = schoolsHtml;

            // ËÆæÁΩÆÈ°µËÑö
            const footerElement = document.getElementById('footer');
            footerElement.innerHTML = `
                <p>${data.footer.copyright}</p>
                <p>ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥Ôºö${data.footer.lastUpdate}</p>
                <p>${data.footer.tip}</p>
                <p>${data.footer.totalCount}</p>
            `;
        }

        // ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
            document.getElementById('error').textContent = `Âä†ËΩΩÂ§±Ë¥•: ${message}`;
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÊâßË°å
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const data = await loadData();
                renderPage(data);
                
                // ÈöêËóèÂä†ËΩΩÊèêÁ§∫ÔºåÊòæÁ§∫ÂÜÖÂÆπ
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
            } catch (error) {
                showError(error.message);
            }
        });
    </script>
</body>
</html>
